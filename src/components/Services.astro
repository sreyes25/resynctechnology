---
const iconSrc = {
  web: "/services/web.svg",
  spark: "/services/automate.svg",
  mobile: "/services/app.svg",
};
type IconKey = keyof typeof iconSrc;

const services: Array<{
  title: string;
  desc: string;
  href: string;
  icon: IconKey;
}> = [
  {
    title: "Apps",
    desc: "Custom iOS and web apps built for real workflows. Ship fast, iterate with confidence, scale without rewrites.",
    href: "/#contact",
    icon: "mobile",
  },
  {
    title: "Websites",
    desc: "Fast and clean SEO-ready sites that look sharp on every device and stay easy to update as you grow.",
    href: "/#contact",
    icon: "web",
  },
  {
    title: "Automation",
    desc: "Automate repetitive ops with integrations and internal tooling—save time, reduce errors, keep teams moving.",
    href: "/#contact",
    icon: "spark",
  },
];

const iconClass =
  "mt-1 inline-flex h-9 w-9 items-center justify-center rounded-xl border border-white/10 bg-white/[0.04] text-white/85 shadow-[0_0_0_1px_rgba(255,255,255,0.03),0_10px_30px_rgba(0,0,0,0.35)]";
---

<section id="services" class="relative overflow-hidden bg-[#040305f2] text-white">
  <!-- Ambient background (dark, premium — matches CTA / footer vibe) -->
  <div class="pointer-events-none absolute inset-0 -z-10">
    <!-- Base dark gradient with slight red carryover from hero -->
    <div class="absolute inset-0 bg-[linear-gradient(180deg,rgba(14,6,8,0.95)_0%,rgba(7,4,6,0.92)_32%,rgba(4,3,5,0.96)_70%,rgba(3,2,4,0.98)_100%)]"></div>

    <!-- Deep red undertone sweep (pulls hero tone downward) -->
    <div class="absolute -top-64 -left-72 h-175 w-175 rounded-full bg-[radial-gradient(circle_at_center,rgba(225,29,72,0.22),transparent_62%)] blur-3xl"></div>
    <div class="absolute -top-72 right-[-50px] h-150 w-150 rounded-full bg-[radial-gradient(circle_at_center,rgba(255,122,90,0.18),transparent_58%)] blur-3xl"></div>
    <div class="absolute -bottom-90 -right-90 h-190 w-190 rounded-full bg-[radial-gradient(circle_at_center,rgba(159,18,57,0.22),transparent_64%)] blur-3xl"></div>

    <!-- Secondary cool tint (very faint) -->
    <div class="absolute -top-88 -right-105 h-190 w-190 rounded-full bg-[radial-gradient(circle_at_center,rgba(99,102,241,0.1),transparent_66%)] blur-3xl"></div>

    <!-- Soft inner highlight to avoid flatness -->
    <div class="absolute inset-0 bg-[radial-gradient(110%_80%_at_55%_18%,rgba(255,255,255,0.05),transparent_60%)]"></div>

    <!-- Dot texture (make it visible on true black) -->
    <div class="absolute inset-0 opacity-[0.24] bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.22)_1px,transparent_1px)] bg-size-[10px_10px]"></div>
    <div class="absolute inset-0 opacity-[0.12] bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.12)_1px,transparent_1px)] bg-size-[5px_5px]"></div>

    <!-- Vignette + top fade (keeps focus on content, blends into hero) -->
    <div class="absolute inset-0 bg-[radial-gradient(140%_120%_at_50%_0%,rgba(26,10,15,0.14),transparent_36%,rgba(0,0,0,0.86)_100%)]"></div>
    <div class="absolute inset-x-0 top-0 h-20 bg-[linear-gradient(to_bottom,rgba(4,3,5,0.8),transparent)]"></div>
  </div>

  <div class="mx-auto max-w-6xl px-4 py-16 sm:px-6 sm:py-20 lg:py-16">
    <div class="max-w-2xl">
      <h2 class="text-3xl font-extrabold tracking-tight sm:text-4xl">
        Our services
      </h2>
    </div>

    <!-- Invertase-style list -->
    <div class="mt-10 divide-y divide-white/10 rounded-2xl border border-white/10 bg-white/[0.035] backdrop-blur-md shadow-[0_30px_90px_rgba(0,0,0,0.55)] ring-1 ring-white/5">
      {services.map((s) => (
        <div class="p-6 sm:p-8 transition-colors duration-200 hover:bg-white/3 hover:shadow-[inset_0_0_0_1px_rgba(255,255,255,0.07),0_0_0_1px_rgba(225,29,72,0.14)]">
          <div class="flex gap-4">
            <div class={iconClass} aria-hidden="true">
              <img src={iconSrc[s.icon]} alt="" class="h-5 w-5" loading="lazy" />
            </div>

            <div class="min-w-0 flex-1">
              <h3 class="text-lg font-semibold text-white sm:text-xl">{s.title}</h3>
              <p class="mt-2 max-w-2xl text-sm leading-relaxed text-white/70 sm:text-base">
                {s.desc}
              </p>

              <a
                href={s.href}
                class="mt-4 inline-flex items-center gap-2 text-sm font-semibold text-white/85 transition hover:text-white"
              >
                Learn more
                <span aria-hidden="true" class="text-white/60">›</span>
              </a>
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- bottom CTA strip -->
    <div class="mt-10 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
      <p class="text-m text-white/80">
        Need an app, website, or automation? We’ll map a plan and ship.
      </p>
     <a href="/#contact" class="rt-btn-primary">
      <span class="cta-glow"></span>
      Start a Project
    </a>
    </div>
  </div>
</section>
