---
const steps = [
  {
    k: "01",
    title: "Discovery",
    desc: "Clarify goals, constraints, users, and success metrics.",
    span: "md:col-span-3",
    img: "/process/discovery.svg",
    artPos: "calc(100% - 15px) 25%",
    artSize: "40% auto",
    artOpacity: 0.40,
  },
  {
    k: "02",
    title: "Scope",
    desc: "Define deliverables, architecture, and milestones.",
    span: "md:col-span-3",
    img: "/process/scope.svg",
    artPos: "calc(100% - 15px) 25%",
    artSize: "37% auto",
    artOpacity: 0.40,
  },
  {
    k: "03",
    title: "Build → Iterate",
    desc: "Ship in tight loops with demos and fast feedback.",
    span: "md:col-span-4",
    img: "/process/build.svg",
    artPos: "calc(100% - 30px) 50%",
    artSize: "37% auto",
    artOpacity: 0.40,
  },
  {
    k: "04",
    title: "Launch → Support",
    desc: "Deploy, monitor, and improve with real data.",
    span: "md:col-span-2",
    img: "/process/launch2.svg",
    artPos: "calc(100% - 25px) 50%",
    artSize: "35% auto",
    artOpacity: 0.40,
  },
];
---

<style is:global>
  @keyframes processFloat {
    0% { transform: translate3d(0, 0, 0) scale(1.02); filter: blur(0px) saturate(1.05); }
    50% { transform: translate3d(0, -8px, 0) scale(1.04); filter: blur(0.2px) saturate(1.1); }
    100% { transform: translate3d(0, 0, 0) scale(1.02); filter: blur(0px) saturate(1.05); }
  }

  @keyframes processSheen {
    0% { transform: translateX(-30%) rotate(10deg); opacity: 0; }
    35% { opacity: 0.55; }
    100% { transform: translateX(130%) rotate(10deg); opacity: 0; }
  }

  .process-float {
    animation: processFloat 7.5s ease-in-out infinite;
    will-change: transform, filter;
  }

  .process-art {
    pointer-events: none;
    mix-blend-mode: screen;
  }

  .group:hover .process-step-stamp {
    border-color: rgba(255,255,255,0.18);
    background: rgba(255,255,255,0.07);
  }

  .process-sheen {
    opacity: 0;
  }

  .group:hover .process-sheen {
    animation: processSheen 1.1s ease-out 1;
  }

  @media (prefers-reduced-motion: reduce) {
    .process-float { animation: none; }
    .group:hover .process-sheen { animation: none; }
  }
</style>

<section id="process" class="border-t border-black/5 bg-paper py-16">
  <div class="mx-auto max-w-6xl px-4 sm:px-6">
    <div class="mx-auto max-w-3xl text-center">
      <h2 class="text-3xl font-semibold tracking-tight sm:text-4xl">Process</h2>
      <p class="mt-3 text-sm leading-relaxed text-ink/65 sm:text-base">
        Clear steps, tight feedback loops, and deliverables you can actually use.
      </p>
    </div>

    <div class="mt-10 grid gap-5 md:grid-cols-6">
      {steps.map((s) => (
        <article
          class={`group relative overflow-hidden rounded-2xl border border-black/10 bg-[#0b0f14] shadow-soft transition-transform duration-200 hover:-translate-y-0.5 ${s.span}`}
        >
          {/* Soft ambient gradient */}
          <div class="absolute inset-0 bg-[radial-gradient(60%_80%_at_20%_20%,rgba(99,102,241,0.22),transparent_60%),radial-gradient(70%_90%_at_80%_30%,rgba(16,185,129,0.18),transparent_55%),linear-gradient(180deg,rgba(255,255,255,0.06),transparent_55%)]"></div>

          {/* Image layer (fits, no ugly cropping) */}
          <div
            class="process-float process-art pointer-events-none absolute inset-0"
            style={`
              background-image: url(${s.img});
              background-repeat: no-repeat;
              background-position: ${s.artPos};
              background-size: ${s.artSize};
              opacity: ${s.artOpacity};
            `}
          ></div>
          <div class="absolute inset-0 bg-[radial-gradient(70%_70%_at_30%_30%,rgba(255,255,255,0.10),transparent_60%)]"></div>

          {/* Subtle dot texture */}
          <div class="absolute inset-0 opacity-25 bg-[radial-gradient(circle_at_1px_1px,rgba(255,255,255,0.10)_1px,transparent_1px)] bg-size-[7px_7px]"></div>

          {/* Edge vignette */}
          <div class="absolute inset-0 bg-[radial-gradient(120%_100%_at_50%_0%,transparent_40%,rgba(0,0,0,0.55)_100%)]"></div>

          {/* Hover sheen */}
          <div class="pointer-events-none absolute -inset-16 opacity-0 blur-2xl transition-opacity duration-300 group-hover:opacity-100 bg-[radial-gradient(circle_at_30%_30%,rgba(255,255,255,0.14),transparent_55%)]"></div>

          {/* Sheen sweep */}
          <div class="process-sheen pointer-events-none absolute -inset-10 bg-[linear-gradient(110deg,transparent_0%,rgba(255,255,255,0.10)_35%,rgba(255,255,255,0.05)_50%,transparent_70%)]"></div>

          <div class="relative flex min-h-55 flex-col justify-end p-6 sm:min-h-60">
            <div class="mb-3">
              <span class="process-step-stamp inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[11px] font-semibold text-white/75 backdrop-blur">
                <span class="font-mono tracking-wider text-white/80">{s.k}</span>
                <span class="h-3 w-px bg-white/15"></span>
                <span class="text-[10px] font-medium tracking-[0.28em] text-white/55">STEP</span>
              </span>
            </div>

            <h3 class="text-xl font-semibold tracking-tight text-white sm:text-2xl">
              {s.title}
            </h3>
            <p class="mt-2 text-sm leading-relaxed text-white/70">
              {s.desc}
            </p>

            <div class="mt-5 inline-flex items-center gap-2 text-sm font-semibold text-white/75 transition-colors group-hover:text-white">
              Learn more
              <span class="text-lg leading-none">›</span>
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>
